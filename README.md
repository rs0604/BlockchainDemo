# BlockchainDemo
Python3 &amp; Flaskで動く、簡素なブロックチェーン

基本的には、参考サイトの丸パクリですが、
## 参考サイト：
ブロックチェーンを作ることで学ぶ 〜ブロックチェーンがどのように動いているのか学ぶ最速の方法は作ってみることだ〜

https://qiita.com/hidehiro98/items/841ece65d896aeaa8a2a

## 動作環境:
1. python 3.6以上 & pip
2. pip でFlaskとRequest libraryをインストール

```
pip install Flask==0.12.2 requests==2.18.4
```

3. jsonでリクエストを投げるため、Postmanをインストール

## 実行手順
### 1. サーバーの起動
```bash
$ python blockchain.py
```

サーバーが立ち上がると、「ジェネシスブロック」と呼ばれる、
ブロックチェーンの先頭部分が生成されます。

### 2. リクエスト
#### 2.1 採掘

POSTMAN（cURLでも可）
http://localhost:5000/mine に GETリクエストを送信すると、採掘できます。

チェーン末尾に、新しいブロックを生成します。
この例では、ブロックの生成は「PoW(Proof of Work Algorithm)」に基づいて行われます。

##### Proof of ~ とは
Proof of ~ とは、「ブロックを追加する権利を決める仕組み」です。
具体的には、ハッシュ関数で探す値をどのように決めるかであり、
PoW以外にはコイン保有年数の長い人を優遇するアルゴリズムである「Proof of Stake」や、
予め決められた承認者の8割が承認すればブロックを生成できる「Proof of Concensus」などがあります。
PoWにおける「採掘」とは単純に、
「ハッシュ関数に代入すると、決められたルールでゼロが並ぶハッシュ値が得られる入力値(Nonce)を探す」
という条件なので、採掘者ごとの有利・不利はマシンパワーのみによって決まります。


##### ハッシュ値がどのようにセキュリティに寄与するのか
参考: https://coinotaku.com/?p=1235
Nonceは各ブロックに記録されており、あるブロックに紐づく取引を改ざんすると、
改ざん対象のブロック以前のすべてのNonceが条件を満たさなくなります。
過去のブロックすべてをマイニングするのと同等の労力がかかり、
その間に正当なブロックチェーンもどんどん長くなっていってるため、事実上改ざんは不可能です。


#### 2.2 採掘したブロックに新しいトランザクションを作る
http://localhost:5000/transactions/new に POSTリクエストを送信する。

例)
```
{
  "sender": <採掘で取得したレスポンスのrecipientのハッシュ値>,
  "recipient": "someone-other-address",
  "amount": 5
}
```


#### 2.3 採掘したブロックを取得する
http://localhost:5000/chain に GETリクエストを投げると、採掘済みのブロックをすべて取得できます。

### 3. コンセンサス：非中央集権的な、ブロックチェーン確認処理



